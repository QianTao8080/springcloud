<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>user</title>
    <script src="../static/js/http_cdn.jsdelivr.net_npm_vue_dist_vue.js"></script>
    <script src="../static/js/http_unpkg.com_axios_dist_axios.js"></script>
    <!-- 引入样式 -->
    <link rel="stylesheet" href="../static/css/http_unpkg.com_element-ui_lib_theme-chalk_index.css">
    <!-- 引入组件库 -->
    <script src="../static/js/http_unpkg.com_element-ui_lib_index.js"></script>
</head>
<body>
<!-- 搜索 -->
<div id="userInfo">
    <el-form :inline="true" :model="formInline" class="demo-form-inline">
        <el-form-item label="姓名">
            <el-input v-model="formInline.user" placeholder="姓名"></el-input>
        </el-form-item>
        <el-form-item>
            <el-button type="primary" @click="selectByPage">查询</el-button>
        </el-form-item>
    </el-form>
    <!-- 数据 -->
    <div>
        <table>
            <thead>
            <tr>
                <td>id</td>
                <td>姓名</td>
                <td>性别</td>
                <td>年龄</td>
                <td>生日</td>
            </tr>
            </thead>
            <tbody>
            <tr v-for="user in pageList">
                <td>{{ user.id }}</td>
                <td>{{ user.name }}</td>
                <td>{{ user.sex }}</td>
                <td>{{ user.age }}</td>
                <td>{{ user.birth }}</td>
            </tr>
            </tbody>
        </table>
    </div>
</div>
</body>
<script>
    let app = new Vue({
        el: "#userInfo",
        data: {
            formInline: {
                username: "",
            },
            pageNo: 1,
            pageSize: 10,
            pageNum: 0,
            pageList: [],
        },
        methods: {
            selectByPage: function (pageNo, pageSize, userName) {
                let that = this;
                //axios
                axios.post("http://localhost:8081/user/list", {
                    pageNo: pageNo,
                    pageSize: pageSize,
                    name: userName
                }).then(function (response) {
                    let resultData = response.data;
                    that.pageNo = resultData.pageNo
                    that.pageSize = resultData.pageSize
                    that.pageNum = resultData.pageNum;
                    that.pageList = resultData.result
                }, function (error) {
                    console.log(error)
                });
                // axios.get("http://localhost:8081/user/list?pageNo=" + pageNo + "&pageSize=" + pageSize + "&name=" + userName).then(function (response) {
                //     console.log(response)
                // }, function (error) {
                //     console.log(error)
                // });
            }
        },
        created: function () {
            this.selectByPage(1, 2, "")
            console.log("------created-----------")
        },
        mounted: function () {
            console.log("``````mounted```````````")
        }
    });
</script>
</html>